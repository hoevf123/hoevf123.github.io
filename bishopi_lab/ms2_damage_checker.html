<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>비숍이 실험실</title>
    <link rel="stylesheet" href="common.css">
    <script src="w3-include-html.js"></script>
</head>

<body>
    <div w3-include-html="nav-header.html"></div>
    <section>
        <div class="div-content">
            <h1>메이플스토리2 대미지 계산기</h1>
            <p>이 페이지에 사용된 대미지 계산기는 벨붕 님으로부터 전달받아 그대로 적용하였습니다.</p>
            <p>※ 현재 이 페이지를 통해 나오는 대미지 결과값은 여러가지 이유로 <b>정확하지 않으니</b> 재미로만 해 보시길 부탁드립니다.※</p>
            <p>(이 소스는 TypeScript 언어로 작성된 파일을 벨붕 님이 퍼왔다고 합니다. 실제 이 소스 작성자가 누구인지는 저는 모릅니다)</p>
            <br/>
            <p>한국 서버와 다르게 표기되어 있는 용어 설명</p>
            <ul>
                <li>
                    <p>등급 정보 : 노멀(Normal), 레어(Rare), 엘리트(Exceptional), 엑설런트(Epic), 레전더리(Legendary), 에픽(Ascendant)</p> 
                </li>
                <li>
                    <p>bonusAttack : "전투력"</p>
                </li>
            </ul>
            <br/>
            <h2>던전 별 권장 플레이 공격 점수</h2>
            <div class="ms2-frame border">
                <div class="ms2-frame">
                    <ul>
                        <li>
                            <h3>엘리트 어드벤처 세트(70레벨)</h3>
                            <div class="ms2-status-score-frame ms2-attack-damage">
                                <p class="header-score">공격 점수</p>
                                <p class="value-score">2,500,000</p>
                            </div>
                        </li>
                        <li>
                            <h3>파이어 프리즘 무기 +10, 풀젬</h3>
                            <div class="ms2-status-score-frame ms2-attack-damage">
                                <p class="header-score">공격 점수</p>
                                <p class="value-score">10,000,000</p>
                            </div>
                        </li>
                        <li>
                            <h3>(어려움)슈슈와 부부스, (어려움)호루스, 발록, (일반)데보라크, (일반)블랙빈</h3>
                            <div class="ms2-status-score-frame ms2-attack-damage">
                                <p class="header-score">공격 점수</p>
                                <p class="value-score">30,000,000</p>
                            </div>
                        </li>
                        <li>
                            <h3>(어려움)블랙빈</h3>
                            <div class="ms2-status-score-frame ms2-attack-damage">
                                <p class="header-score">공격 점수</p>
                                <p class="value-score">70,000,000</p>
                            </div>
                        </li>
                        <li>
                            <h3>(어려움)데보라크, (일반)블랙핑크빈</h3>
                            <div class="ms2-status-score-frame ms2-attack-damage">
                                <p class="header-score">공격 점수</p>
                                <p class="value-score">100,000,000</p>
                            </div>
                        </li>
                        <li>
                            <h3>(어려움)블랙핑크빈</h3>
                            <div class="ms2-status-score-frame ms2-attack-damage">
                                <p class="header-score">공격 점수</p>
                                <p class="value-score">170,000,000</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
           
            <h2>아이템 점수 측정에 사용할 장비 선택하기</h2>
            <p>추후 추가하고 싶은 기능입니다.</p>
            <div class="ms2-frame border">
                <div class="ms2-frame">
                    <h3>아이템 선택</h3>
                    <div class="item-select-container" style="display: flex; flex-direction: column; align-items: center; gap: 20px;">
                        <div class="gear-select-container" style="display: flex; flex-direction: column; align-items: center; gap: 10px;">
                            <h4>장비 선택</h4>
                            <div class="ms2-item-slot selected-item" style="width: 64px; height: 64px;">
                                <img class="ms2-item" src="./pictogram/item_fire_prism_scepter.png">
                            </div>
                            <select id="gear-select" class="ms2-select" style="width: 300px; padding: 8px; font-size: 16px;">
                                <option value="">장비 선택</option>
                                <optgroup label="무기">
                                    <option value="fire_prism_scepter">파이어 프리즘 섭터</option>
                                    <option value="fire_prism_codex">파이어 프리즘 코덱스</option>
                                </optgroup>
                                <optgroup label="방어구">
                                    <option value="fire_prism_hat">파이어 프리즘 모자</option>
                                    <option value="fire_prism_shirt">파이어 프리즘 상의</option>
                                    <option value="fire_prism_pants">파이어 프리즘 하의</option>
                                    <option value="fire_prism_gloves">파이어 프리즘 장갑</option>
                                    <option value="fire_prism_shoes">파이어 프리즘 신발</option>
                                </optgroup>
                                <optgroup label="액세서리">
                                    <option value="geork_kai_earings">게오르크 카이저 귀걸이</option>
                                    <option value="geork_kai_neckless">게오르크 카이저 목걸이</option>
                                    <option value="geork_kai_rings">게오르크 카이저 반지</option>
                                    <option value="geork_kai_cape">게오르크 카이저 망토</option>
                                    <option value="geork_kai_belt">게오르크 카이저 벨트</option>
                                </optgroup>
                            </select>
                            <button class="add-gear-btn" style="padding: 8px 16px; font-size: 14px;">장비 추가</button>
                        </div>
                        <div class="skin-select-container" style="display: flex; flex-direction: column; align-items: center; gap: 10px;">
                            <h4>스킨 선택</h4>
                            <div class="ms2-item-slot selected-skin" style="width: 64px; height: 64px;">
                                <img class="ms2-item" src="./pictogram/item_cherry_blossom_scepter.png">
                            </div>
                            <select id="skin-select" class="ms2-select" style="width: 300px; padding: 8px; font-size: 16px;">
                                <optgroup label="무기 스킨">
                                    <option value="cherry_blossom_scepter">체리 블라썸 홀</option>
                                    <option value="cherry_blossom_bouquet">체리 블라썸 부케</option>
                                </optgroup>
                                <optgroup label="방어구 스킨">
                                    <option value="shine_star_beremo">샤인 스타 베레모</option>
                                    <option value="shine_star_stage_outfit">샤인 스타 스테이지 의상</option>
                                    <option value="shine_star_bracelet">샤인 스타 브레이슬릿</option>
                                    <option value="shine_star_walker">샤인 스타 워커</option>
                                </optgroup>
                                <optgroup label="장신구 스킨">
                                    <option value="shine_heart_wing">샤인 하트 윙</option>
                                </optgroup>
                                <optgroup label="기타 스킨">
                                    <option value="shine_star_deco">샤인 스타 데코</option>
                                    <option value="egg_toast">에그 토스트</option>
                                </optgroup>
                            </select>
                            <button class="add-skin-btn" style="padding: 8px 16px; font-size: 14px;">스킨 추가</button>
                        </div>
                    </div>
                    <script type="text/javascript">
                        // 아이템 선택 시 이미지 업데이트 함수
                        function updateSelectedItemImage(selectId, slotClass) {
                            const select = document.getElementById(selectId);
                            const itemSlot = document.querySelector(slotClass);
                            
                            // 이벤트 리스너 제거 후 재등록
                            select.removeEventListener('change', select.onChangeHandler);
                            
                            // 이벤트 핸들러 함수 정의
                            select.onChangeHandler = function() {
                                const selectedValue = this.value;
                                
                                if (selectedValue) {
                                    const img = document.createElement('img');
                                    img.className = 'ms2-item';
                                    img.src = `./pictogram/item_${selectedValue}.png`;
                                    
                                    // 기존 이미지 제거
                                    itemSlot.innerHTML = '';
                                    itemSlot.appendChild(img);
                                } else {
                                    itemSlot.innerHTML = '';
                                }
                            };
                            
                            // 이벤트 리스너 등록
                            select.addEventListener('change', select.onChangeHandler);
                        }

                        // 아이템 추가 함수
                        function addItemToInventory(selectId, isSkin = false) {
                            const select = document.getElementById(selectId);
                            const selectedValue = select.value;
                            if (!selectedValue) return;

                            const inventory = document.querySelector('.ms2-character-equipment-generating-area');
                            const emptySlot = inventory.querySelector('.ms2-item-slot:empty');
                            
                            if (emptySlot) {
                                const img = document.createElement('img');
                                img.className = `ms2-item${isSkin ? ' skin' : ''}`;
                                img.src = `./pictogram/item_${selectedValue}.png`;
                                img.dataset.itemName = selectedValue;
                                emptySlot.appendChild(img);
                                
                                // 인벤토리 매니저에 아이템 추가
                                if (window.inventoryManager) {
                                    window.inventoryManager.addSelectedItem(selectedValue, isSkin ? 'skin' : 'equipment');
                                }
                            } else {
                                alert('인벤토리가 가득 찼습니다!');
                            }
                        }

                        // 초기 이미지 설정
                        function initializeSelectedImages() {
                            const gearSelect = document.getElementById('gear-select');
                            const skinSelect = document.getElementById('skin-select');
                            
                            if (gearSelect.value) {
                                const gearSlot = document.querySelector('.selected-item');
                                const gearImg = document.createElement('img');
                                gearImg.className = 'ms2-item';
                                gearImg.src = `./pictogram/item_${gearSelect.value}.png`;
                                gearSlot.innerHTML = '';
                                gearSlot.appendChild(gearImg);
                            }
                            
                            if (skinSelect.value) {
                                const skinSlot = document.querySelector('.selected-skin');
                                const skinImg = document.createElement('img');
                                skinImg.className = 'ms2-item';
                                skinImg.src = `./pictogram/item_${skinSelect.value}.png`;
                                skinSlot.innerHTML = '';
                                skinSlot.appendChild(skinImg);
                            }
                        }

                        // 장비 선택 시 이미지 업데이트
                        updateSelectedItemImage('gear-select', '.selected-item');
                        
                        // 스킨 선택 시 이미지 업데이트
                        updateSelectedItemImage('skin-select', '.selected-skin');

                        // 초기 이미지 설정
                        initializeSelectedImages();

                        // 장비 추가 버튼 클릭 이벤트
                        document.querySelector('.add-gear-btn').addEventListener('click', function() {
                            addItemToInventory('gear-select', false);
                        });

                        // 스킨 추가 버튼 클릭 이벤트
                        document.querySelector('.add-skin-btn').addEventListener('click', function() {
                            addItemToInventory('skin-select', true);
                        });
                    </script>
                </div>
                <div class="ms2-frame">
                    <h3>내 인벤토리</h3>
                    <div class="ms2-character-equipment-generating-area">
                        <div class="ms2-inventory equipment">
                            <!-- 인벤토리 슬롯은 JavaScript를 통해 동적으로 생성됩니다 -->
                        </div>
                    </div>
                </div>
                <div class="ms2-frame">
                    <h3>현재 장착중인 장비</h3>
                    <div class="equipped-inventory equipment">
                        <div class="ms2-item-slot right-hand weapon"></div>
                        <div class="ms2-item-slot left-hand weapon"></div>
                        <div class="ms2-item-slot headgear"></div>
                        <div class="ms2-item-slot shirt"></div>
                        <div class="ms2-item-slot pants"></div>
                        <div class="ms2-item-slot gloves"></div>
                        <div class="ms2-item-slot shoes"></div>
                        <div class="ms2-item-slot earings"></div>
                        <div class="ms2-item-slot necklace"></div>
                        <div class="ms2-item-slot rings"></div>
                        <div class="ms2-item-slot cape"></div>
                        <div class="ms2-item-slot belt"></div>
                        <div class="ms2-item-slot badge-meta"></div>
                    </div>
                    <h4 style="margin-top: 20px;">현재 장착중인 스킨</h4>
                    <div class="equipped-inventory skin">
                        <div class="ms2-item-slot right-hand weapon"></div>
                        <div class="ms2-item-slot left-hand weapon"></div>
                        <div class="ms2-item-slot headgear"></div>
                        <div class="ms2-item-slot shirt"></div>
                        <div class="ms2-item-slot pants"></div>
                        <div class="ms2-item-slot gloves"></div>
                        <div class="ms2-item-slot shoes"></div>
                        <div class="ms2-item-slot earings"></div>
                        <div class="ms2-item-slot eyedeco"></div>
                        <div class="ms2-item-slot rings"></div>
                        <div class="ms2-item-slot cape"></div>
                        <div class="ms2-item-slot facedeco"></div>
                        <div class="ms2-item-slot mark"></div>
                    </div>
                </div>
            </div>
            
            <div style="display: none;">
                <h3>현재 장착중인 장비</h3>
                <div class="equipped-inventory equipment">
                    <div class="ms2-item-slot right-hand weapon"></div>
                    <div class="ms2-item-slot left-hand weapon"></div>
                    <div class="ms2-item-slot headgear"></div>
                    <div class="ms2-item-slot shirt"></div>
                    <div class="ms2-item-slot pants"></div>
                    <div class="ms2-item-slot gloves"></div>
                    <div class="ms2-item-slot shoes"></div>
                    <div class="ms2-item-slot earings"></div>
                    <div class="ms2-item-slot neckless"></div>
                    <div class="ms2-item-slot rings"></div>
                    <div class="ms2-item-slot cape"></div>
                    <div class="ms2-item-slot belt"></div>
                </div>
                <h3>현재 장착중인 스킨</h3>
                <div class="equipped-inventory skin">
                    <div class="ms2-item-slot right-hand weapon"></div>
                    <div class="ms2-item-slot left-hand weapon"></div>
                    <div class="ms2-item-slot headgear"></div>
                    <div class="ms2-item-slot shirt"></div>
                    <div class="ms2-item-slot pants"></div>
                    <div class="ms2-item-slot gloves"></div>
                    <div class="ms2-item-slot shoes"></div>
                    <div class="ms2-item-slot earings"></div>
                    <div class="ms2-item-slot neckless"></div>
                    <div class="ms2-item-slot rings"></div>
                    <div class="ms2-item-slot cape"></div>
                    <div class="ms2-item-slot belt"></div>
                </div>
                <h3>현재 장착중인 배지</h3>
                <div class="equipped-inventory badge">
                    <div class="ms2-item-slot badge-transparent"></div>
                    <div class="ms2-item-slot badge-speakballon"></div>
                    <div class="ms2-item-slot badge-nametag"></div>
                    <div class="ms2-item-slot badge-autoharvest"></div>
                    <div class="ms2-item-slot badge-coupleeffect"></div>
                    <div class="ms2-item-slot badge-effect"></div>
                    <div class="ms2-item-slot badge-tombstone"></div>
                    <div class="ms2-item-slot badge-damagefont"></div>
                    <div class="ms2-item-slot badge-swimmingtube"></div>
                    <div class="ms2-item-slot badge-fishing"></div>
                    <div class="ms2-item-slot badge-petskin"></div>
                    <div class="ms2-item-slot badge-meta"></div>
                </div>
            </div>
            
            <br/>
            <h2>계산된 대미지</h2>
            <input type="button" value="계산" onclick="ms2_attack_gen.updateDamage()">
            <div class="ms2-frame border">
                <div></div>
                <!-- 스탯 표기 영역 -->
                <div>
                    <div class="ms2-status-score-frame ms2-attack-damage">
                        <p class="header-score">공격 점수</p>
                        <p class="value-score ms2-damage-calculated-result">Damage Not Calculated</p>
                    </div>
                    <div class="ms2-status-score-frame ms2-defense">
                        <p class="header-score">방어 점수</p>
                        <p class="value-score">0</p>
                    </div>
                    <div class="ms2-status-score-frame ms2-gear">
                        <p class="header-score">아이템 점수</p>
                        <p class="value-score">0</p>
                    </div>
                    <div class="ms2-damage-check-generating-area"></div>
                </div>
                
            </div>
            
            <div class="ms2-frame border">
                <div class="ms2-frame">
                    <ol>
                        <li>
                            <h3>마법 저항력 관통</h3>
                            <div class="ms2-status-score-frame ms2-attack-damage">
                                <p class="header-score">공격 점수</p>
                                <p class="value-score">2,500,000</p>
                            </div>
                        </li>
                        <li>
                            <h3>방어력 관통</h3>
                            <div class="ms2-status-score-frame ms2-attack-damage">
                                <p class="header-score">공격 점수</p>
                                <p class="value-score">10,000,000</p>
                            </div>
                        </li>
                        <li>
                            <h3>파괴의 젬스톤(대미지 증가)</h3>
                            <div class="ms2-status-score-frame ms2-attack-damage">
                                <p class="header-score">공격 점수</p>
                                <p class="value-score">30,000,000</p>
                            </div>
                        </li>
                        <li>
                            <h3>공격속도</h3>
                            <div class="ms2-status-score-frame ms2-attack-damage">
                                <p class="header-score">공격 점수</p>
                                <p class="value-score">70,000,000</p>
                            </div>
                        </li>
                        <li>
                            <h3>명중</h3>
                            <div class="ms2-status-score-frame ms2-attack-damage">
                                <p class="header-score">공격 점수</p>
                                <p class="value-score">100,000,000</p>
                            </div>
                        </li>
                        <li>
                            <h3>크리티컬 대미지</h3>
                            <div class="ms2-status-score-frame ms2-attack-damage">
                                <p class="header-score">공격 점수</p>
                                <p class="value-score">170,000,000</p>
                            </div>
                        </li>
                        <li>
                            <h3>크리티컬 명중</h3>
                            <div class="ms2-status-score-frame ms2-attack-damage">
                                <p class="header-score">공격 점수</p>
                                <p class="value-score">170,000,000</p>
                            </div>
                        </li>
                        <li>
                            <h3>보스 몬스터 공격 시 대미지 증가</h3>
                            <div class="ms2-status-score-frame ms2-attack-damage">
                                <p class="header-score">공격 점수</p>
                                <p class="value-score">170,000,000</p>
                            </div>
                        </li>
                    </ol>
                </div>
            </div>
            
            

            <!-- origin source -->
            <script type="text/javascript" src="ms2_character_attack_status.js"></script>
            <!-- source code of createTag function -->
            <script type="text/javascript" src="createTag.js"></script>
            <!-- source code of character inventory implementation -->
            <script type="text/javascript" src="ms2_character_inventory.js"></script>
            <!-- html tag maker -->
            <script type="text/javascript" src="ms2_damage_checker.js"></script>
            
        </div>
        
    </section>
</body>